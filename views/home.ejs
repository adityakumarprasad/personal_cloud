<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>myDrive</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.css" rel="stylesheet" />
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white min-h-screen flex flex-col items-center justify-center">

  <h1 class="text-4xl font-bold mb-8">myDrive</h1>

  <button 
    data-modal-target="uploadModal" 
    data-modal-toggle="uploadModal" 
    class="px-6 py-3 bg-blue-600 text-white rounded-xl shadow-md transition-transform transform hover:scale-105 hover:bg-blue-700">
    Upload File
  </button>
  <a href="/user/logout" class="mt-4 px-6 py-3 bg-red-600 text-white rounded-xl shadow-md transition-transform transform hover:scale-105 hover:bg-red-700">Logout</a>

  <div id="uploadModal" tabindex="-1" aria-hidden="true" 
    class="hidden fixed top-0 left-0 right-0 z-50 w-full p-4 overflow-x-hidden overflow-y-auto h-screen bg-black/50 backdrop-blur-sm">
    <div class="relative w-full max-w-lg mx-auto">

      <div class="relative bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6">
        
        <button type="button" class="absolute top-3 right-3 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300" data-modal-hide="uploadModal">
          âœ•
        </button>

        <h3 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">
          Upload your file
        </h3>

        <form action="/upload" method="POST" enctype="multipart/form-data" class="space-y-4">
          
          <label for="dropzone-file" class="flex flex-col items-center justify-center w-full h-40 border-2 border-dashed rounded-xl cursor-pointer bg-gray-50 dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 border-gray-300 dark:border-gray-600">
            <div class="flex flex-col items-center justify-center pt-5 pb-6">
              <svg class="w-10 h-10 mb-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M7 16V4a1 1 0 011-1h8a1 1 0 011 1v12m-4 0v4m0-4l-2 2m2-2l2 2" />
              </svg>
              <p class="mb-2 text-sm text-gray-500 dark:text-gray-400"><span class="font-semibold">Click to upload</span> or drag and drop</p>
              <p class="text-xs text-gray-500 dark:text-gray-400">Any file up to 50MB</p>
            </div>
            <input id="dropzone-file" type="file" name="file" class="hidden" />
          </label>

          <button type="submit" class="w-full py-2 bg-blue-600 text-white rounded-xl shadow hover:bg-blue-700 transition">
            Upload
          </button>
        </form>
      </div>
    </div>
  </div>

  <div class="mt-8 w-full max-w-2xl">
    <h2 class="text-2xl font-semibold mb-4">Your Files</h2>
    
    <% if (files.length === 0) { %>
      <p class="text-gray-500 dark:text-gray-400">No files uploaded yet.</p>
    <% } else { %>
      <ul class="space-y-2">
        <% files.forEach(file => { %>
          <li class="flex justify-between items-center p-4 bg-gray-100 dark:bg-gray-800 rounded-lg">
            <span><%= file.originalname %></span>
            <a href="/download/<%= file._id %>" class="px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700">Download</a>
          </li>
        <% }) %>
      </ul>
    <% } %>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.3.0/flowbite.min.js"></script>
</body>
</html>